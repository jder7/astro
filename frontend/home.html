<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Astro App â€“ Natal &amp; Transit Charts</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              display: ['"Space Grotesk"', "Inter", "system-ui", "sans-serif"],
              body: ["Inter", "system-ui", "sans-serif"],
            },
            colors: {
              nebula: {
                50: "#e6f7ff",
                100: "#c9edff",
                500: "#38bdf8",
                700: "#0ea5e9",
              },
            },
          },
        },
      };
    </script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.css"
      integrity="sha512-4CrzvWKAMiv1znMPFPA/lqlo9ykTDj9GdHwq3iujHBNSnopB7UpRz45dQ/gGn5ed7DF1NsA8OmUp7YHEV+mFKg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/static/css/home.css" />
  </head>
  <body class="bg-slate-950 text-slate-50 font-body min-h-screen">
    <div class="bg-[radial-gradient(circle_at_10%_20%,rgba(56,189,248,0.15),transparent_25%),radial-gradient(circle_at_90%_10%,rgba(129,140,248,0.15),transparent_25%),radial-gradient(circle_at_50%_75%,rgba(14,165,233,0.12),transparent_30%)]">
      <header class="max-w-6xl mx-auto px-4 sm:px-6 pt-10 pb-8">
        <div class="flex items-start justify-between gap-4">
          <div>
            <p class="text-sm uppercase tracking-[0.4em] text-cyan-200/70 font-semibold">Astrology Toolkit</p>
            <h1 class="font-display text-3xl sm:text-4xl mt-2 leading-tight">Astro App</h1>
            <p class="text-slate-300 mt-3 max-w-3xl">
              Generate natal or transit SVG charts with a single request and view a concise natal summary focused on
              the Sun, Moon, Ascendant and their tightest aspects.
            </p>
          </div>
          <span class="hidden sm:inline-flex px-3 py-1 rounded-full bg-slate-800/70 border border-slate-700 text-xs font-semibold tracking-wide text-cyan-200">
            API-ready
          </span>
        </div>
      </header>

      <main class="max-w-6xl mx-auto px-4 sm:px-6 pb-12">
        <div class="grid lg:grid-cols-3 gap-6">
          <section class="lg:col-span-1">
            <div class="flowbite-card h-full">
                <div class="flex items-center justify-between mb-4">
                  <div>
                    <p class="text-sm text-cyan-200/80 font-semibold">Chart input</p>
                    <h2 class="text-xl font-semibold text-white">Configure request</h2>
                  </div>
                <div class="flex items-center gap-2">
                  <button
                    type="button"
                    id="configToggle"
                    class="inline-flex items-center justify-center w-10 h-10 rounded-full border border-slate-700 bg-slate-800/80 text-slate-200 hover:text-white hover:border-cyan-400 hover:shadow-cyan-500/25 shadow-lg transition"
                    aria-label="Open configuration"
                  >
                    <svg class="w-5 h-5" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.757.426 1.757 2.924 0 3.35a1.724 1.724 0 0 0-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 0 0-2.572 1.065c-.426 1.757-2.924 1.757-3.35 0a1.724 1.724 0 0 0-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 0 0-1.065-2.572c-1.757-.426-1.757-2.924 0-3.35a1.724 1.724 0 0 0 1.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                      <circle cx="12" cy="12" r="3" />
                    </svg>
                  </button>
                  <button
                    type="button"
                    id="clearStateBtn"
                    class="inline-flex items-center justify-center w-10 h-10 rounded-full border border-slate-700 bg-slate-800/80 text-slate-200 hover:text-white hover:border-rose-400 hover:shadow-rose-500/25 shadow-lg transition"
                    aria-label="Clear saved state"
                  >
                    <svg class="w-5 h-5" aria-hidden="true" viewBox="0 0 64 64" fill="none">
                      <path d="M16 10l1.8 3.6L22 16l-4.2 1.4L16 21l-1.8-3.6L10 16l4.2-1.4L16 10Z" fill="currentColor"/>
                      <path d="M50 10l1.4 2.8L54 14l-2.6.8L50 18l-1.4-3.2L46 14l2.6-1.2L50 10Z" fill="currentColor"/>
                      <path d="M14 40l1.4 2.8L18 44l-2.6.8L14 48l-1.4-3.2L10 44l2.6-1.2L14 40Z" fill="currentColor"/>
                      <rect x="28" y="8" width="6" height="34" rx="3" transform="rotate(-15 28 8)" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                      <rect x="23" y="36" width="16" height="6" rx="3" transform="rotate(-15 23 36)" fill="none" stroke="currentColor" stroke-width="3"/>
                      <path d="M20 44l26-8-6 18c-.6 1.8-2.6 2.8-4.4 2.2l-15.2-5.2c-1.8-.6-2.8-2.6-2.2-4.4Z" fill="none" stroke="currentColor" stroke-width="3" stroke-linejoin="round"/>
                    </svg>
                  </button>
                </div>
              </div>

              <div id="configPanel" class="config-panel hidden">
                <div class="flex items-center justify-between mb-3">
                  <div>
                    <p class="text-xs uppercase tracking-[0.25em] text-cyan-200/80 font-semibold">Chart config</p>
                    <p class="text-sm text-slate-300">Defaults persist in this browser.</p>
                  </div>
                  <button type="button" id="configClose" class="text-slate-400 hover:text-white transition" aria-label="Close config">
                    <svg class="w-4 h-4" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>
                <div class="grid sm:grid-cols-2 gap-3">
                  <div>
                    <label for="configPerspective" class="flowbite-label">Perspective</label>
                    <select id="configPerspective" class="flowbite-input">
                      <option value="Topocentric" selected>Topocentric</option>
                      <option value="Apparent Geocentric">Apparent Geocentric</option>
                      <option value="True Geocentric">True Geocentric</option>
                      <option value="Heliocentric">Heliocentric</option>
                    </select>
                  </div>
                  <div>
                    <label for="configZodiac" class="flowbite-label">Zodiac type</label>
                    <select id="configZodiac" class="flowbite-input">
                      <option value="Sidereal" selected>Sidereal</option>
                      <option value="Tropic">Tropic</option>
                    </select>
                  </div>
                  <div id="siderealRow">
                    <label for="configSiderealMode" class="flowbite-label">Sidereal mode</label>
                    <select id="configSiderealMode" class="flowbite-input">
                      <option value="KRISHNAMURTI" selected>KRISHNAMURTI</option>
                      <option value="LAHIRI">LAHIRI</option>
                    </select>
                  </div>
                  <div>
                    <label for="configHouse" class="flowbite-label">House system</label>
                    <select id="configHouse" class="flowbite-input">
                      <option value="W">Whole sign (W)</option>
                      <option value="P" selected>Placidus (P)</option>
                      <option value="K">Koch (K)</option>
                      <option value="R">Regiomontanus (R)</option>
                    </select>
                  </div>
                  <div>
                    <label for="configTheme" class="flowbite-label">Chart SVG theme</label>
                    <select id="configTheme" class="flowbite-input">
                      <option value="dark" selected>dark</option>
                      <option value="classic">classic</option>
                      <option value="dark-high-contrast">dark-high-contrast</option>
                      <option value="light">light</option>
                      <option value="strawberry">strawberry</option>
                      <option value="black-and-white">black-and-white</option>
                    </select>
                  </div>
                </div>
                <p class="mt-3 text-xs text-slate-400">Saved automatically to this browser and applied to all API requests.</p>
              </div>

              <form id="natalForm" class="space-y-6">
                <div>
                  <div class="flex items-center justify-between mb-3">
                    <label class="block text-sm font-medium text-slate-200">Mode</label>
                    <span class="text-xs text-slate-400">Choose how to generate the chart</span>
                  </div>
                  <div class="mode-grid">
                    <label class="mode-card">
                      <input type="radio" name="mode" value="natal" checked class="sr-only" />
                      <div class="mode-card-inner">
                        <div class="mode-card-check" aria-hidden="true"></div>
                        <div class="mode-card-icon" aria-hidden="true">ðŸ‘¤</div>
                        <div class="mode-card-title">Natal</div>
                      </div>
                    </label>
                    <label class="mode-card">
                      <input type="radio" name="mode" value="transit" class="sr-only" />
                      <div class="mode-card-inner">
                        <div class="mode-card-check" aria-hidden="true"></div>
                        <div class="mode-card-icon" aria-hidden="true">ðŸ•’</div>
                        <div class="mode-card-title">Transit</div>
                      </div>
                    </label>
                    <label class="mode-card">
                      <input type="radio" name="mode" value="natal_transit" class="sr-only" />
                      <div class="mode-card-inner">
                        <div class="mode-card-check" aria-hidden="true"></div>
                        <div class="mode-card-icon" aria-hidden="true">ðŸŒ€</div>
                        <div class="mode-card-title">Natal + Transit</div>
                      </div>
                    </label>
                    <label class="mode-card">
                      <input type="radio" name="mode" value="relationship" class="sr-only" />
                      <div class="mode-card-inner">
                        <div class="mode-card-check" aria-hidden="true"></div>
                        <div class="mode-card-icon" aria-hidden="true">ðŸ‘¥</div>
                        <div class="mode-card-title">Relationship</div>
                      </div>
                    </label>
                  </div>
                </div>

                <div id="birthSection" class="space-y-4">
                  <div class="flex items-center justify-between">
                    <h3 class="text-sm font-semibold text-slate-200 uppercase tracking-[0.2em]">Birth</h3>
                    <span class="text-[10px] px-2 py-1 rounded-full bg-slate-800 text-cyan-200 border border-slate-700">Natal</span>
                  </div>
                  <div id="nameRow">
                    <label for="name" class="flowbite-label">Name</label>
                    <input
                      id="name"
                      name="name"
                      type="text"
                      value="Subject"
                      class="flowbite-input"
                      placeholder="Person or chart label"
                    />
                  </div>

                  <div class="grid sm:grid-cols-2 gap-4">
                    <div>
                      <label for="dateInput" class="flowbite-label">Date</label>
                      <div class="relative">
                        <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400">
                          <svg class="w-4 h-4" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2z" />
                          </svg>
                        </div>
                        <input
                          id="dateInput"
                          name="dateInput"
                          type="text"
                          value="1990-01-01"
                          class="flowbite-input pl-10"
                          placeholder="YYYY-MM-DD"
                          datepicker
                          datepicker-buttons
                          datepicker-autohide
                          datepicker-format="yyyy-mm-dd"
                          autocomplete="off"
                        />
                      </div>
                    </div>
                    <div>
                      <label for="timeInput" class="flowbite-label">Time</label>
                      <div class="relative">
                        <input
                          id="timeInput"
                          name="timeInput"
                          type="text"
                          value="12:00"
                          class="flowbite-input pr-12"
                          placeholder="HH:MM"
                          autocomplete="off"
                        />
                        <button
                          type="button"
                          class="absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400 hover:text-slate-200 transition"
                          data-timepicker-toggle
                          data-target="#timeInput"
                          aria-label="Open time picker"
                        >
                          <svg class="w-4 h-4" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6l3.5 2" />
                            <circle cx="12" cy="12" r="9" />
                          </svg>
                        </button>
                      </div>
                    </div>
                  </div>

                  <div class="grid sm:grid-cols-2 gap-4">
                    <div>
                      <label for="lat" class="flowbite-label">Latitude</label>
                      <input id="lat" name="lat" type="number" step="0.0001" value="52.3702" class="flowbite-input" />
                    </div>
                    <div>
                      <label for="lng" class="flowbite-label">Longitude</label>
                      <input id="lng" name="lng" type="number" step="0.0001" value="4.8952" class="flowbite-input" />
                    </div>
                  </div>

                  <div>
                    <label for="tz_str" class="flowbite-label">Timezone</label>
                    <input
                      id="tz_str"
                      name="tz_str"
                      type="text"
                      value="Europe/Amsterdam"
                      class="flowbite-input"
                      placeholder="IANA timezone (e.g. Europe/Amsterdam)"
                    />
                  </div>

                  <div class="grid sm:grid-cols-2 gap-4">
                    <div>
                      <label for="city" class="flowbite-label">City</label>
                      <input id="city" name="city" type="text" value="Amsterdam" class="flowbite-input" />
                    </div>
                    <div>
                      <label for="nation" class="flowbite-label">Country code</label>
                      <input id="nation" name="nation" type="text" value="NL" maxlength="2" class="flowbite-input" />
                    </div>
                  </div>
                </div>

                <div id="transitSection" class="space-y-4">
                  <div class="flex items-center justify-between">
                    <h3 class="text-sm font-semibold text-slate-200 uppercase tracking-[0.2em]">Transit moment</h3>
                    <span class="text-[10px] px-2 py-1 rounded-full bg-slate-800 text-amber-200 border border-slate-700">Outer wheel</span>
                  </div>
                  <div class="grid sm:grid-cols-2 gap-4">
                    <div>
                      <label for="transitDateInput" class="flowbite-label">Date</label>
                      <div class="relative">
                        <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400">
                          <svg class="w-4 h-4" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2z" />
                          </svg>
                        </div>
                        <input
                          id="transitDateInput"
                          name="transitDateInput"
                          type="text"
                          value="2025-01-01"
                          class="flowbite-input pl-10"
                          placeholder="YYYY-MM-DD"
                          datepicker
                          datepicker-buttons
                          datepicker-autohide
                          datepicker-format="yyyy-mm-dd"
                          autocomplete="off"
                        />
                      </div>
                    </div>
                    <div>
                      <label for="transitTimeInput" class="flowbite-label">Time</label>
                      <div class="relative">
                        <input
                          id="transitTimeInput"
                          name="transitTimeInput"
                          type="text"
                          value="12:00"
                          class="flowbite-input pr-12"
                          placeholder="HH:MM"
                          autocomplete="off"
                        />
                        <button
                          type="button"
                          class="absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400 hover:text-slate-200 transition"
                          data-timepicker-toggle
                          data-target="#transitTimeInput"
                          aria-label="Open time picker"
                        >
                          <svg class="w-4 h-4" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6l3.5 2" />
                            <circle cx="12" cy="12" r="9" />
                          </svg>
                        </button>
                      </div>
                    </div>
                  </div>

                  <div class="grid sm:grid-cols-2 gap-4">
                    <div>
                      <label for="transitLat" class="flowbite-label">Latitude</label>
                      <input id="transitLat" name="transitLat" type="number" step="0.0001" value="52.3702" class="flowbite-input" />
                    </div>
                    <div>
                      <label for="transitLng" class="flowbite-label">Longitude</label>
                      <input id="transitLng" name="transitLng" type="number" step="0.0001" value="4.8952" class="flowbite-input" />
                    </div>
                  </div>

                  <div>
                    <label for="transitTz" class="flowbite-label">Timezone</label>
                    <input
                      id="transitTz"
                      name="transitTz"
                      type="text"
                      value="Europe/Amsterdam"
                      class="flowbite-input"
                      placeholder="IANA timezone (e.g. Europe/Amsterdam)"
                    />
                  </div>

                  <div class="grid sm:grid-cols-2 gap-4">
                    <div>
                      <label for="transitCity" class="flowbite-label">City</label>
                      <input id="transitCity" name="transitCity" type="text" value="Amsterdam" class="flowbite-input" />
                    </div>
                    <div>
                      <label for="transitNation" class="flowbite-label">Country code</label>
                      <input id="transitNation" name="transitNation" type="text" value="NL" maxlength="2" class="flowbite-input" />
                    </div>
                  </div>
                </div>

                <div id="relationshipSection" class="space-y-6">
                  <div class="flex items-center justify-between">
                    <h3 class="text-sm font-semibold text-slate-200 uppercase tracking-[0.2em]">Relationship</h3>
                    <span class="text-[10px] px-2 py-1 rounded-full bg-slate-800 text-rose-200 border border-slate-700">Synastry</span>
                  </div>
                  <div class="grid gap-4">
                    <div class="space-y-3">
                      <div class="flex items-center justify-between">
                        <h4 class="text-xs font-semibold text-slate-300 uppercase tracking-[0.2em]">Partner A</h4>
                        <span class="text-[10px] px-2 py-1 rounded-full bg-slate-800 text-slate-200 border border-slate-700">Inner</span>
                      </div>
                      <label for="firstName" class="flowbite-label">Name</label>
                      <input id="firstName" name="firstName" class="flowbite-input" value="Partner A" />
                      <div class="grid sm:grid-cols-2 gap-3">
                        <div>
                          <label class="flowbite-label" for="firstDate">Date</label>
                          <input id="firstDate" class="flowbite-input" value="1990-01-01" />
                        </div>
                        <div>
                          <label class="flowbite-label" for="firstTime">Time</label>
                          <input id="firstTime" class="flowbite-input" value="12:00" />
                        </div>
                      </div>
                      <div class="grid sm:grid-cols-2 gap-3">
                        <div>
                          <label class="flowbite-label" for="firstLat">Latitude</label>
                          <input id="firstLat" type="number" step="0.0001" class="flowbite-input" value="52.3702" />
                        </div>
                        <div>
                          <label class="flowbite-label" for="firstLng">Longitude</label>
                          <input id="firstLng" type="number" step="0.0001" class="flowbite-input" value="4.8952" />
                        </div>
                      </div>
                      <label class="flowbite-label" for="firstTz">Timezone</label>
                      <input id="firstTz" class="flowbite-input" value="Europe/Amsterdam" />
                      <div class="grid sm:grid-cols-2 gap-3">
                        <div>
                          <label class="flowbite-label" for="firstCity">City</label>
                          <input id="firstCity" class="flowbite-input" value="Amsterdam" />
                        </div>
                        <div>
                          <label class="flowbite-label" for="firstNation">Country code</label>
                          <input id="firstNation" class="flowbite-input" value="NL" maxlength="2" />
                        </div>
                      </div>
                    </div>
                    <div class="space-y-3">
                      <div class="flex items-center justify-between">
                        <h4 class="text-xs font-semibold text-slate-300 uppercase tracking-[0.2em]">Partner B</h4>
                        <span class="text-[10px] px-2 py-1 rounded-full bg-slate-800 text-slate-200 border border-slate-700">Outer</span>
                      </div>
                      <label for="secondName" class="flowbite-label">Name</label>
                      <input id="secondName" name="secondName" class="flowbite-input" value="Partner B" />
                      <div class="grid sm:grid-cols-2 gap-3">
                        <div>
                          <label class="flowbite-label" for="secondDate">Date</label>
                          <input id="secondDate" class="flowbite-input" value="1992-02-02" />
                        </div>
                        <div>
                          <label class="flowbite-label" for="secondTime">Time</label>
                          <input id="secondTime" class="flowbite-input" value="14:00" />
                        </div>
                      </div>
                      <div class="grid sm:grid-cols-2 gap-3">
                        <div>
                          <label class="flowbite-label" for="secondLat">Latitude</label>
                          <input id="secondLat" type="number" step="0.0001" class="flowbite-input" value="40.7128" />
                        </div>
                        <div>
                          <label class="flowbite-label" for="secondLng">Longitude</label>
                          <input id="secondLng" type="number" step="0.0001" class="flowbite-input" value="-74.0060" />
                        </div>
                      </div>
                      <label class="flowbite-label" for="secondTz">Timezone</label>
                      <input id="secondTz" class="flowbite-input" value="America/New_York" />
                      <div class="grid sm:grid-cols-2 gap-3">
                        <div>
                          <label class="flowbite-label" for="secondCity">City</label>
                          <input id="secondCity" class="flowbite-input" value="New York" />
                        </div>
                        <div>
                          <label class="flowbite-label" for="secondNation">Country code</label>
                          <input id="secondNation" class="flowbite-input" value="US" maxlength="2" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4">
                  <button
                    type="submit"
                    id="generateBtn"
                    class="inline-flex items-center justify-center px-5 py-2.5 text-sm font-semibold text-slate-950 bg-gradient-to-r from-cyan-400 via-sky-400 to-blue-500 rounded-xl shadow-lg shadow-cyan-500/25 hover:shadow-cyan-400/40 focus:ring-4 focus:outline-none focus:ring-cyan-300 transition"
                  >
                    Generate chart
                  </button>
                  <span id="status" class="status"></span>
                </div>
              </form>
            </div>
          </section>

          <section class="lg:col-span-2 space-y-6">
            <div class="flowbite-card">
              <div class="flex items-center justify-between gap-3 mb-4">
                <div>
                  <p class="text-sm text-cyan-200/80 font-semibold">Summary</p>
                  <h2 class="text-xl font-semibold text-white">Highlights</h2>
                </div>
                <span class="text-xs px-2 py-1 rounded-full bg-slate-800 text-slate-200 border border-slate-700">
                  Sun Â· Moon Â· Asc Â· Moon cycle
                </span>
              </div>
              <div id="summaryContent" class="summary-content">
                <p class="hint">
                  Generate any mode to see Sun, Moon, Ascendant, moon cycle phase, and the tightest aspects for natal,
                  transit, or both.
                </p>
              </div>
            </div>

            <div class="flowbite-card">
              <div class="flex items-center justify-between gap-3 mb-4">
                <div>
                  <p class="text-sm text-cyan-200/80 font-semibold">SVG output</p>
                  <h2 class="text-xl font-semibold text-white">Chart preview</h2>
                </div>
                  <div class="flex items-center gap-2">
                    <button
                      type="button"
                      id="downloadPdfBtn"
                      class="inline-flex items-center gap-1 px-3 py-2 text-xs font-semibold text-white rounded-lg border border-slate-700 bg-slate-800/80 hover:border-cyan-400 hover:text-cyan-100 transition"
                    >
                    <svg class="w-4 h-4" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v12m0 0l-4-4m4 4 4-4M4 20h16" />
                    </svg>
                    Download PDF
                  </button>
                  <span class="text-xs px-2 py-1 rounded-full bg-slate-800 text-slate-200 border border-slate-700">
                    Live render
                  </span>
                </div>
              </div>
              <div class="chart-wrapper">
                <button
                  type="button"
                  id="zoomBtn"
                  class="chart-zoom-btn"
                  aria-label="Open zoomed chart view"
                  title="Zoom chart"
                >
                  <svg class="w-4 h-4" aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="6" />
                    <line x1="16.5" y1="16.5" x2="21" y2="21" stroke-linecap="round" />
                  </svg>
                </button>
                <div id="chartContainer" class="chart-container">
                  <p class="hint">
                    Fill in the form and click <strong>Generate chart</strong> to render a natal, transit, or dual-wheel SVG here.
                  </p>
                </div>
              </div>
            </div>

            <div class="flowbite-card">
              <div class="flex items-center justify-between gap-3 mb-4">
                <div>
                  <p class="text-sm text-cyan-200/80 font-semibold">Full report</p>
                  <h2 id="reportTitle" class="text-xl font-semibold text-white">Detailed text</h2>
                </div>
                <div class="flex gap-2">
                  <button
                    type="button"
                    id="loadReportBtn"
                    class="inline-flex items-center gap-1 px-3 py-2 text-xs font-semibold text-white rounded-lg border border-slate-700 bg-slate-800/80 hover:border-cyan-400 hover:text-cyan-100 transition"
                  >
                    Load report
                  </button>
                  <button
                    type="button"
                    id="downloadReportBtn"
                    class="inline-flex items-center gap-1 px-3 py-2 text-xs font-semibold text-white rounded-lg border border-slate-700 bg-slate-800/80 hover:border-cyan-400 hover:text-cyan-100 transition"
                  >
                    Download report PDF
                  </button>
                </div>
              </div>
              <div id="reportContainer" class="report-container">
                <button
                  type="button"
                  id="copyReportBtn"
                  class="report-copy-btn"
                  aria-label="Copy report to clipboard"
                  title="Copy report"
                >
                  <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                  </svg>
                </button>
                <div id="reportContent" class="report-content">
                  <p class="hint">Click "Load report" to fetch the full text report for the current mode.</p>
                </div>
              </div>
            </div>
          </section>
        </div>
      </main>

      <footer class="border-t border-slate-800/80 bg-slate-950/70 backdrop-blur">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 py-6 text-sm text-slate-300 flex flex-wrap items-center gap-2">
          <span class="font-semibold text-white">Astro App &amp; API</span>
          <span class="text-slate-500">â€” powered by</span>
          <a class="text-cyan-200 hover:text-cyan-100 font-semibold" href="https://www.kerykeion.net/" target="_blank" rel="noreferrer">
            Kerykeion
          </a>
          <span class="text-slate-500">and FastAPI.</span>
        </div>
      </footer>
    </div>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"
      integrity="sha512-eNB1lPVKSAW5mXqnboj6QX9kTZKEq4t2f2c5ytUhb+QzPudY3imnjHyXYhIXavZo9e3slCjhDpOJhuMm9uSwzw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/datepicker.min.js" referrerpolicy="no-referrer"></script>
    <div id="svgModal" class="svg-modal">
      <div class="svg-modal-content">
        <div class="svg-modal-header">
          <div class="svg-zoom-controls">
            <button type="button" id="svgZoomOut" class="svg-zoom-btn" aria-label="Zoom out">
              <svg class="w-4 h-4" viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14" stroke-linecap="round" />
              </svg>
            </button>
            <button type="button" id="svgZoomIn" class="svg-zoom-btn" aria-label="Zoom in">
              <svg class="w-4 h-4" viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14m-7-7h14" stroke-linecap="round" />
              </svg>
            </button>
          </div>
          <button id="svgModalClose" class="svg-modal-close" type="button" aria-label="Close zoom panel">
            <svg class="w-4 h-4" viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div id="svgModalBody" class="svg-modal-body"></div>
      </div>
    </div>
    <script>
      (function () {
        const dateInput = document.getElementById("dateInput");
        if (dateInput && typeof Datepicker !== "undefined") {
          try {
            const existing = Datepicker.getInstance(dateInput);
            if (!existing) {
              new Datepicker(dateInput, {
                autohide: true,
                format: "yyyy-mm-dd",
                orientation: "bottom",
                todayHighlight: true,
                weekStart: 1,
              });
            }
          } catch (err) {
            console.warn("Datepicker init failed", err);
          }
        }

        const timeInput = document.getElementById("timeInput");
        if (timeInput && typeof Timepicker !== "undefined") {
          try {
            const existingTime = Timepicker.getInstance(timeInput);
            if (!existingTime) {
              new Timepicker(timeInput, {
                defaultTime: "12:00",
                minuteStep: 1,
                format: "HH:mm",
              });
            }
          } catch (err) {
            console.warn("Timepicker init failed", err);
          }
        }

        const transitDateInput = document.getElementById("transitDateInput");
        if (transitDateInput && typeof Datepicker !== "undefined") {
          try {
            const existing = Datepicker.getInstance(transitDateInput);
            if (!existing) {
              new Datepicker(transitDateInput, {
                autohide: true,
                format: "yyyy-mm-dd",
                orientation: "bottom",
                todayHighlight: true,
                weekStart: 1,
              });
            }
          } catch (err) {
            console.warn("Transit datepicker init failed", err);
          }
        }

        const transitTimeInput = document.getElementById("transitTimeInput");
        if (transitTimeInput && typeof Timepicker !== "undefined") {
          try {
            const existingTime = Timepicker.getInstance(transitTimeInput);
            if (!existingTime) {
              new Timepicker(transitTimeInput, {
                defaultTime: "12:00",
                minuteStep: 1,
                format: "HH:mm",
              });
            }
          } catch (err) {
            console.warn("Transit timepicker init failed", err);
          }
        }
      })();
    </script>
    <script src="/static/js/home/shared.js"></script>
    <script src="/static/js/home/config.js"></script>
    <script src="/static/js/home/payloads.js"></script>
    <script src="/static/js/home/render.js"></script>
    <script src="/static/js/home/state.js"></script>
    <script src="/static/js/home/actions.js"></script>
  </body>
</html>
